#!/bin/bash

# --- PATH LOGIC ---
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
if WIN_PROJECT_DIR="$(cd "$SCRIPT_DIR" && pwd -W 2>/dev/null)"; then
  PROJECT_DIR="$WIN_PROJECT_DIR"
else
  PROJECT_DIR="$(echo "$SCRIPT_DIR" | sed -E 's|^/([a-zA-Z])/(.*)|\1:/\2|' | sed 's|\\|/|g')"
fi

# The hooks folder is usually inside the project root, 
# so we go up one level to find assets
ASSETS="$PROJECT_DIR/../assets"

# --- TRIGGERS ---

# 1. Play Sound (Background)
powershell.exe -ExecutionPolicy Bypass -File "$ASSETS/play_sound.ps1" &

# 2. Pop up the Image Window (Background)
powershell.exe -ExecutionPolicy Bypass -File "$ASSETS/show_image.ps1" &

# 3. Terminal Message
echo -e "\e[1;33m"
echo "---------------------------"
echo "    VICTORY ACHIEVED       "
echo "---------------------------"
echo -e "\e[0m"